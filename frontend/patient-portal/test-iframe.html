<!DOCTYPE html>
<html>
<head>
    <title>Test Iframe</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        h1 {
            color: #D97757;
        }
        iframe {
            width: 100%;
            height: 80vh;
            border: 2px solid #D97757;
            border-radius: 8px;
            display: block;
        }
        .info {
            padding: 20px;
            background: #FFF8F3;
            margin: 20px 0;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>ðŸ§ª Iframe Test - Proto.py</h1>
    
    <div class="info">
        <p><strong>Testing:</strong> http://localhost:5001</p>
        <p><strong>Status:</strong> <span id="status">Loading...</span></p>
        <button onclick="checkStatus()">Check Status</button>
        <button onclick="reloadIframe()">Reload Iframe</button>
    </div>
    
    <iframe 
        id="testFrame" 
        src="http://localhost:5001/" 
        allow="camera *; microphone *"
        sandbox="allow-same-origin allow-scripts allow-forms"
    ></iframe>
    
    <script>
        const iframe = document.getElementById('testFrame');
        const statusEl = document.getElementById('status');
        
        iframe.onload = function() {
            console.log('âœ… Iframe loaded');
            statusEl.textContent = 'Loaded successfully';
            statusEl.style.color = 'green';
        };
        
        iframe.onerror = function(e) {
            console.error('âŒ Iframe error', e);
            statusEl.textContent = 'Failed to load';
            statusEl.style.color = 'red';
        };
        
        function checkStatus() {
            fetch('http://localhost:5001/status_update')
                .then(r => r.json())
                .then(data => {
                    alert('Status: ' + JSON.stringify(data, null, 2));
                })
                .catch(e => {
                    alert('Error: ' + e.message);
                });
        }
        
        function reloadIframe() {
            iframe.src = iframe.src;
        }
        
        console.log('ðŸ§ª Test page loaded');
        console.log('Iframe src:', iframe.src);
    </script>
</body>
</html>
